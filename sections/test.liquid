<div class="test">{{ section.id }}</div>

{% liquid
  assign product_form_id = 'product-form-' | append: section.id
  assign product = section.settings['select-product']
%}

{% comment %} カートに追加ボタン {% endcomment %}
<product-form class="product-form">
  {%- form 'product',
    product,
    id: product_form_id,
    class: 'form',
    novalidate: 'novalidate',
    data-type: 'add-to-cart-form'
  -%}
    <input
      type="hidden"
      name="id"
      value="{{ product.selected_or_first_available_variant.id }}"
      disabled
    >
    <div class="product-form__buttons">
      <button
        type="submit"
        name="add"
        class="button button--full-width"
        {% if product.selected_or_first_available_variant.available == false %}
          disabled
        {% endif %}
      >
        <span>
          {%- if product.selected_or_first_available_variant.available -%}
            {{ 'products.product.add_to_cart' | t }}
          {%- else -%}
            {{ 'products.product.sold_out' | t }}
          {%- endif -%}
        </span>
        <div class="loading-overlay__spinner hidden">
          <svg
            aria-hidden="true"
            focusable="false"
            role="presentation"
            class="spinner"
            viewBox="0 0 66 66"
            xmlns="http://www.w3.org/2000/svg"
          >
            <circle class="path" fill="none" stroke-width="6" cx="33" cy="33" r="30"></circle>
          </svg>
        </div>
      </button>
    </div>
  {% endform %}
</product-form>
{% comment %} カートに追加ボタン 終了 {% endcomment %}

<script src="{{ 'product-form.js' | asset_url }}" defer="defer"></script>

{% schema %}
{
  "name": "テストです",
  "settings": [
    {
      "type": "product",
      "id": "select-product",
      "label": "商品を選択してください"
    }
  ],
  "presets": [
    {
      "name": "テストです"
    }
  ]
}
{% endschema %}
